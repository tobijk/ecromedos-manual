
	<chapter>
		<title><label id="sect:installation"/>Installation</title>
		<p>
			This chapter covers the installation of ecromedos from source and binary packages. You
		should be able to run ecromedos on any system on which the dependencies listed below are
		available.
		</p>
		<section>
			<title>Obtaining the Latest Version</title>
			<p>
				The latest version of the software can be obtained from the project's website
			at <link url="http://ecromedos.net"><tt>http://&zwsp;www.&zwsp;ecromedos.&zwsp;net</tt></link>.
			You will find a tarball for manual installation and binary packages for selected platforms.
			</p>
		</section>
		<section>
			<title>Dependencies<label id="sect:dependencies"/></title>
			<p>
				For proper operation, ecromedos depends on the following third-party
			software offerings:
			</p>
			<dl>
				<dt>Python</dt>
				<dd>
				<p>
					A powerful scripting language. Python is available for all popular operating
				systems and can be obtained from the website of the Python Software Foundation
				at <link url="http://python.org"><tt>http://&zwsp;www.&zwsp;python.&zwsp;org</tt></link>.
				You will need version 2.4 or later to run ecromedos. Please note that ecromedos is
				not yet ready for Python 3.
				</p>
				</dd>
				<dt>libxml and libxslt</dt>
				<dd>
				<p>
					Two super fast and stable libraries for processing XML, developed by Daniel
				Veillard for the GNOME project. Both libraries offer bindings to Python. The
				project homepage is at <link url="http://www.xmlsoft.org"><tt>http://&zwsp;www.&zwsp;xmlsoft.&zwsp;org</tt></link>.
				</p>
				</dd>
				<dt>Imagemagick</dt>
				<dd>
				<p>
					A set of tools for image manipulation. ecromedos uses Imagemagick for
				resizing bitmap images and to do format conversions. You can download the 
				software from
				<link url="http://imagemagick.org"><tt>http://&zwsp;www.&zwsp;imagemagick.&zwsp;org</tt></link>.
				</p>
				</dd>
				<dt>&tex;</dt>
				<dd>
				<p>
					If you want to produce Postscript or PDF, you need an installation of the
				&tex; typesetting system. It is recommended that you use &tex; Live 2007 or later,
				available from
				<link url="http://www.tug.org/texlive/"><tt>http://&zwsp;www.&zwsp;tug.&zwsp;org/&zwsp;texlive/</tt></link>.
				Windows users may also want to have a look at the MiK&tex; distribution, available from
				<link url="http://miktex.org/"><tt>http://&zwsp;miktex.&zwsp;org</tt></link>.
				Using the once popular but now unmaintained te&tex; distribution together with
				ecromedos 2 is not recommended.
				</p>
				</dd>
				<dt>dvipng</dt>
				<dd>
					<p>
						A utility to convert DVI files to PNG or GIF graphics. ecromedos needs this
					to convert mathematic formulas to bitmap graphics when generating XHTML output.
					dvipng is available from <link url="http://www.nongnu.org/dvipng/"><tt>http://&zwsp;www.&zwsp;nongnu.&zwsp;org/&zwsp;dvipng/</tt></link>,
					it may also be included in your &tex; distribution.
					</p>
				</dd>
			</dl>
		</section>
		<section>
			<title>Installation from Source</title>
			<p>
				First, double check that you have installed the dependencies listed in section
			<ref idref="sect:dependencies"/>.
			</p>
			<minisection>
				<title>Step <counter group="inst_step" simple="yes"/>: Unpacking the Tarball</title>
				<p>
	 				ecromedos can be installed anywhere in the file system. It is recommended,
	 			however, that you place it in <tt>/opt</tt>. In order to do so, open a shell
	 			and become superuser root by typing
	 			</p>
	 			<verbatim strip="yes"><color rgb="#000088">
#&gt; su -
				</color>
				</verbatim>
				<p>			
					Then change your working directory to <tt>/opt</tt>
				</p>
	 			<verbatim strip="yes"><color rgb="#000088">
#&gt; cd /opt
				</color>
				</verbatim>
				<p>
					and unpack the tarball. The following example assumes that the tarball
				resides in the home directory of system user tobias:
				</p>
	 			<verbatim strip="yes"><color rgb="#000088">
#&gt; tar -xvzf /home/tobias/ecromeds-x.y.z.tar.gz
				</color>
				</verbatim>
			</minisection>
			<minisection>
				<title>Step <counter group="inst_step" simple="yes"/>: Adding the Executable to the System Path</title>
				<p>
					Now change to <tt>/usr/local/bin</tt> and create a symbolic link to the
				main executable:
				</p>
	 			<verbatim strip="yes"><color rgb="#000088">
#&gt; cd /usr/local/bin
#&gt; ln -s /opt/ecromedos-x.y.z/bin/ecromedos
				</color>
				</verbatim>
				<p>
					By placing this link in the system path, you will be able to call
				ecromedos by name without having to enter the canonical path to the
				executable.
				</p>
			</minisection>
			<minisection>
				<title>Step <counter group="inst_step" simple="yes"/>: Pre-compiling the Source Files</title>
				<p>
					Since you would typically install ecromedos in a location, to which
				normal system users don't have write access, you should pre-compile the
				Python source files to bytecode, so that users can benefit from much-improved
				application start-up times. To do so, change <i>into</i> the installation directory
				and issue the following command:
				</p>
 			<verbatim strip="yes"><color rgb="#000088">
#&gt; find . -name "*.py" -exec \
	python -c "import py_compile; py_compile.compile('{}')" \;
			</color></verbatim>
			</minisection>
			<minisection>
				<title>Step <counter group="inst_step" simple="yes"/>: Adapting the Configuration</title>
				<p>
					Having completed the installation procedure described above, you may now edit
				the configuration file <tt>ecmds.conf</tt>, which is located in the subdirectory
				<tt>etc</tt> below the installation folder. ecromedos is designed to be relocatable,
				so in many cases it should just	work out of the box. However, the configuration
				variables holding pointers to third-party software that ecromedos relies on may
				have to be corrected. In particular, check all variables ending in <tt>_bin</tt>
				or <tt>_dir</tt>.
				</p>
				<p>
					The value of a configuration variable can be reused in arguments to 
				other variables by prefexing the name of the variable to be	referenced with
				a dollar sign. For instance, if <tt>base_dir</tt> is set to <tt>/opt/ecromedos-x.y.z/</tt>,
				then you can set <tt>lib_dir</tt> to <tt>/opt/ecromedos-x.y.z/lib</tt> by
				simply writing <tt>lib_dir = $base_dir/lib</tt>.
				</p>
				<p>
					ecromedos 2 introduces the automatic variable <tt>$install_dir</tt>, which
				is set implicitely and points to the installation directory.
				</p>
			</minisection>
		</section>
		<section>
			<title>Installing Binary Packages</title>
			<p>
				Packages for Debian, Ubuntu and OpenSUSE are provided. Since ecromedos is written
			in Python, and thus does not need to be compiled or linked against system libraries,
			it should run on any version of these distros, as long as the dependencies listed in
			section <ref idref="sect:dependencies"/> are available.
			</p>
			<subsection>
				<title>Debian/GNU and Ubuntu Linux</title>
				<p>
					If you are running Debian/GNU or Ubuntu Linux, you can install ecromedos via apt.
					Just insert the following entry into <tt>/etc/&zwsp;apt/&zwsp;sources.list</tt>:
				</p>
				<verbatim bgcolor="#eeeeee" strip="yes">
deb http://ecromedos.net/packages/debian debian contrib
				</verbatim>
				<p>
				Then update the package cache and install ecromedos by saying
				</p>
	 			<verbatim strip="yes"><color rgb="#000088">
#&gt; apt-get update
#&gt; apt-get install ecromedos
				</color></verbatim>
				<p>
					The documentation is contained in a separate package <tt>ecromedos-doc</tt>.
				</p>
			</subsection>
			<subsection>
				<title>OpenSUSE Linux</title>
				<p>
					To comfortably install ecromedos on OpenSUSE, add the following repository
				URL to your repository sources:
				</p>
				<verbatim bgcolor="#eeeeee" strip="yes">
http://ecromedos.net/packages/opensuse
				</verbatim>
				<p>
					You can either do this from YaST or on the command line using <tt>zypper</tt>
				like this:
				</p>
	 			<verbatim strip="yes"><color rgb="#000088">
#&gt; zypper addrepo -c -f http://ecromedos.net/packages/opensuse/ ecromedos2
#&gt; zypper install ecromedos
				</color></verbatim>
				<p>
				And if you also want to install the documentation:
				</p>
	 			<verbatim strip="yes"><color rgb="#000088">
#&gt; zypper install ecromedos-doc
				</color></verbatim>
			</subsection>
		</section>
	</chapter>

